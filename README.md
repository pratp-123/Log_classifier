# Log_classifier

### An input log message is processed through the following stages:
1. Regular Expression (Regex) Classification:
    ‚ó¶ Logs are first checked for fixed patterns (e.g., "user logged in/out," or specific account creation messages).
    ‚ó¶ To discover these fixed patterns, the system uses clustering (such as DB scan, based on embeddings generated by a model like Sentence Transformer) on the aggregated logs.
    ‚ó¶ If a match is found, the classification is complete. This path is very fast and cost-optimal.
2. Unknown Samples (No Regex Match):
    ‚ó¶ If the log does not match a fixed regex pattern, it is labeled as "unknown".
    ‚ó¶ The system then checks if there are enough training samples for the log's category.
3. BERT-Based Classification:
    ‚ó¶ Used for complex patterns where there are enough training samples.
    ‚ó¶ This involves taking the aggregated log data (which has log messages and target labels) and generating embeddings using a model like the Sentence Transformer's mini LM L6 V2.
    ‚ó¶ These embeddings (X) are then used to train a logistic regression model (Y is the target label).
    ‚ó¶ For improved accuracy, the prediction is only accepted if the maximum probability exceeds a set threshold (e.g., 0.5); otherwise, it is labeled as "unclassified".
4. LLM Classification (Large Language Model):
    ‚ó¶ Used for complex patterns where there are not enough training samples (e.g., workflow error or deprecation warning categories, often found in logs from older systems like a "Legacy CRM").
    ‚ó¶ The project uses an open-source model like Llama 3.3 70b hosted on Groq Cloud.
    ‚ó¶ The LLM is guided by a specific, restrictive prompt to classify the message into one of the limited categories or return "unclassified," without adding any introductory text ("no preamble").

<hr>
## üì¶ Clone and Run Locally

```bash
git clone https://github.com/pratp-123/Log_classifier.git

# Navigate into the project folder
cd iLog_classifier
## Directory Structure
```
## Creating environment
```
# create env on window
python -m venv venv

#activate env
venv\Scripts\activate
```
```
# create env on mac
python3 -m venv venv
#activate env
source venv/bin/activate
```

## Install Dependencies
```
pip install -r requirements.txt
```

## Run code
‚öôÔ∏è Run the FastAPI Backend

Navigate to the project root (where main.py is located).
Run the API with Uvicorn:
```bash
uvicorn server:app --reload
```

Open your browser and check:
API Root: http://127.0.0.1:8000
Docs (Swagger UI): http://127.0.0.1:8000/docs
